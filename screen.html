<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Deploy Screen Monitor</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      background-color: #000000;
      color: #00ff00;
      font-family: 'Courier New', Courier, monospace;
      font-size: 1.4rem;
      line-height: 1.4;
      overflow: hidden;
      height: 100vh;
      width: 100vw;
    }
    
    .terminal {
      width: 100%;
      height: 100vh;
      background-color: #000000;
      border: 4px solid #00ff00;
      padding: 40px;
      box-shadow: inset 0 0 100px rgba(0, 255, 0, 0.1);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      position: relative;
    }
    
    .terminal::before {
      content: "üñ•Ô∏è DEPLOYMENT MONITOR v4.0 - INSTANT RESPONSE MODE";
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      color: #00ff00;
      border-bottom: 2px solid #00ff00;
      padding-bottom: 10px;
      font-weight: bold;
      font-size: 1.1em;
    }
    
    .waiting {
      color: #00ffff;
      font-size: 2rem;
      animation: pulse 2s infinite;
      text-align: center;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }
    
    .deployment-active {
      display: none;
      width: 100%;
      max-width: 1000px;
    }
    
    .deployment-active.show {
      display: block;
      animation: deploymentSlide 0.8s ease-out;
    }
    
    @keyframes deploymentSlide {
      from { transform: translateY(100px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    
    .deployment-header {
      color: #ffff00;
      font-size: 1.8rem;
      margin-bottom: 30px;
      text-shadow: 0 0 10px #ffff00;
    }
    
    .progress-bar {
      background: #333;
      height: 30px;
      width: 100%;
      margin: 25px 0;
      border-radius: 15px;
      overflow: hidden;
    }
    
    .progress-fill {
      background: linear-gradient(90deg, #00ff00, #00cc00);
      height: 100%;
      width: 0%;
      transition: width 0.4s ease;
      border-radius: 15px;
      box-shadow: 0 0 30px rgba(0, 255, 0, 0.8);
    }
    
    .progress-text {
      color: #00ff00;
      font-size: 1.3rem;
      margin: 20px 0;
      min-height: 100px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .deployment-results {
      display: none;
      font-size: 1.4rem;
      line-height: 1.8;
      margin-top: 30px;
    }
    
    .trait-alignment { color: #ff6600; font-weight: bold; }
    .trait-scent { color: #ff00ff; font-weight: bold; }
    .trait-style { color: #00ffff; font-weight: bold; }
    .status-active { 
      color: #ff0000; 
      font-weight: bold; 
      animation: statusGlow 2s infinite;
    }
    
    @keyframes statusGlow {
      0%, 100% { text-shadow: 0 0 5px #ff0000; }
      50% { text-shadow: 0 0 20px #ff0000; }
    }
    
    .blinking {
      animation: blink 1s infinite;
    }
    
    @keyframes blink {
      0%, 50%, 100% { opacity: 1; }
      25%, 75% { opacity: 0; }
    }
    
    .connection-status {
      position: absolute;
      bottom: 20px;
      left: 40px;
      font-size: 0.8rem;
      color: #666;
    }
    
    .connection-status.connected {
      color: #00ff00;
    }
  </style>
</head>
<body>
  <div class="terminal">
    <div class="waiting" id="waitingMessage">
      üñ•Ô∏è SCREEN ARMED<br><br>
      Waiting for deployment signals...<br>
      <div style="font-size: 1.2rem; margin-top: 20px;">
        Status: <span style="color: #ffff00;">MONITORING</span>
      </div><br>
      <span class="blinking">‚ñà</span>
    </div>
    
    <div class="deployment-active" id="deploymentContent">
      <div class="deployment-header" id="deploymentHeader">
        üöÄ DEPLOYING: <span id="deployUser">UNKNOWN</span>
      </div>
      
      <div class="progress-bar">
        <div class="progress-fill" id="progressBar"></div>
      </div>
      
      <div class="progress-text" id="progressText">
        [ ‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë ] 10%<br>Initializing deployment sequence...
      </div>
      
      <div class="deployment-results" id="deploymentResults">
        <div style="color: #ffff00; font-size: 1.6rem; margin-bottom: 20px;">
          ‚ö° DEPLOYMENT COMPLETE ‚ö°
        </div>
        
        Looking for work: <span style="color: #00ffff; font-weight: bold;">CONFIRMED</span><br>
        Alignment: <span class="trait-alignment" id="traitAlignment">Unknown</span><br>
        Smells of: <span class="trait-scent" id="traitScent">Mystery</span><br>
        Conversational Style: <span class="trait-style" id="traitStyle">Unknown</span><br><br>
        Status: <span class="status-active">ACTIVE IN PRODUCTION</span><br><br>
        Ready for new opportunities...<br>
        <span class="blinking">‚ñà</span>
      </div>
    </div>
    
    <div class="connection-status" id="connectionStatus">
      ‚ö´ Initializing...
    </div>
  </div>

  <script>
    let isDeploymentActive = false;
    let currentStep = 0;
    
    const deploymentSteps = [
      { progress: 15, text: '[ ‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë ] 15%<br>‚ö° Scanning deployment target...' },
      { progress: 30, text: '[ ‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë ] 30%<br>üß¨ Compiling identity matrix...' },
      { progress: 45, text: '[ ‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë ] 45%<br>üé≠ Injecting personality traits...' },
      { progress: 60, text: '[ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë ] 60%<br>üß† Optimizing neural pathways...' },
      { progress: 75, text: '[ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë ] 75%<br>üî¨ Running compatibility tests...' },
      { progress: 90, text: '[ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë ] 90%<br>üì° Establishing connection...' },
      { progress: 100, text: '[ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ] 100%<br>‚úÖ Deployment complete!' }
    ];

    function startDeployment(deploymentData) {
      if (isDeploymentActive) return;
      
      console.log('üöÄ Starting deployment:', deploymentData);
      isDeploymentActive = true;
      currentStep = 0;
      
      document.getElementById('waitingMessage').style.display = 'none';
      document.getElementById('deploymentContent').classList.add('show');
      document.getElementById('deploymentResults').style.display = 'none';
      
      document.getElementById('deployUser').textContent = deploymentData.user || 'ANONYMOUS';
      
      if (deploymentData.traits) {
        document.getElementById('traitAlignment').textContent = deploymentData.traits.alignment;
        document.getElementById('traitScent').textContent = deploymentData.traits.scent;
        document.getElementById('traitStyle').textContent = deploymentData.traits.style;
      }
      
      updateProgress();
    }

    function updateProgress() {
      if (currentStep < deploymentSteps.length) {
        const step = deploymentSteps[currentStep];
        document.getElementById('progressBar').style.width = step.progress + '%';
        document.getElementById('progressText').innerHTML = step.text;
        currentStep++;
        
        const delay = currentStep === deploymentSteps.length ? 1500 : Math.random() * 800 + 600;
        setTimeout(updateProgress, delay);
      } else {
        showFinalResults();
      }
    }

    function showFinalResults() {
      document.getElementById('progressText').style.display = 'none';
      document.getElementById('deploymentResults').style.display = 'block';
      setTimeout(resetScreen, 8000);
    }

    function resetScreen() {
      isDeploymentActive = false;
      document.getElementById('deploymentContent').classList.remove('show');
      document.getElementById('waitingMessage').style.display = 'block';
      document.getElementById('progressText').style.display = 'block';
      document.getElementById('progressBar').style.width = '0%';
    }

    async function checkForDeployments() {
      try {
        const response = await fetch('/api/screen-check');
        const data = await response.json();
        
        document.getElementById('connectionStatus').textContent = 'üü¢ Connected';
        document.getElementById('connectionStatus').className = 'connection-status connected';
        
        if (data.newDeployment && !isDeploymentActive) {
          console.log('üì∫ New deployment detected!');
          startDeployment(data.deployment);
        }
        
      } catch (error) {
        document.getElementById('connectionStatus').textContent = 'üî¥ Error';
        console.error('Check failed:', error);
      }
    }

    // Check every 1 second for instant response
    setInterval(checkForDeployments, 1000);
